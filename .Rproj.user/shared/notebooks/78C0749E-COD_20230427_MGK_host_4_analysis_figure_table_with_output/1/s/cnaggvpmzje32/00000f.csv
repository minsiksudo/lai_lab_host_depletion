"0",""
"0","## lypma"
"0","# only mediator-outcome confounders"
"0","detach_package <- function(pkg, character.only = FALSE)"
"0","{"
"0","  if(!character.only)"
"0","  {"
"0","    pkg <- deparse(substitute(pkg))"
"0","  }"
"0","  search_item <- paste(""package"", pkg, sep = "":"")"
"0","  while(search_item %in% search())"
"0","  {"
"0","    detach(search_item, unload = TRUE, character.only = TRUE)"
"0","  }"
"0","}"
"0",""
"0","detach_package(lmerTest)"
"0",""
"0","## all treatment groups"
"0",""
"0","sample_data_respiratory <- subset(phyloseq_rel_nz %>% sample_data %>% data.frame, sample_data$sample_type == ""Sputum"" | sample_data$sample_type == ""BAL"" | sample_data$sample_type == ""Nasal"")"
"0",""
"0",""
"0","med.fit <- lmer(log10(Final_reads) ~ lypma +  sample_type + (1|subject_id),"
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$lypma == 1))"
"0",""
"0","out.fit <- lmer(S.obs ~ lypma * log10(Final_reads) + sample_type + (1|subject_id), "
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$lypma == 1))"
"0","set.seed(seed)"
"0","med.out.lypma <- mediate(model.m = med.fit,"
"0","                   model.y = out.fit,"
"0","                     treat = ""lypma"","
"0","                     mediator = ""log10(Final_reads)"","
"0","                     sims = 10000)"
"0",""
"0","out.sum <- summary(med.out.lypma)"
"0",""
"0","final.out.lypma <- data.frame(`Indirect est.`=out.sum$d.avg, "
"0","                          `Indirect p-value`=out.sum$d.avg.p,"
"0","                          `Direct est.`=out.sum$z.avg, "
"0","                          `Direct p-value`=out.sum$z.avg.p, "
"0","                          `Total est.`=out.sum$tau.coef, "
"0","                          `Total p-value`=out.sum$tau.p,"
"0","                          `Proportion mediation est.`=out.sum$n.avg, "
"0","                          `Proportion mediation p-value`=out.sum$n.avg.p,"
"0","                          check.names = F) %>% "
"0","    mutate_all(~round(., 3))"
"0",""
"0","## benzonase"
"0",""
"0",""
"0","med.fit <- lmer(log10(Final_reads) ~ benzonase + sample_type + (1|subject_id),"
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$benzonase == 1))"
"0",""
"0","out.fit <- lmer(S.obs ~ benzonase * log10(Final_reads) +  sample_type + (1|subject_id), "
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$benzonase == 1))"
"0",""
"0","set.seed(seed)"
"0","med.out.benzonase <- mediate(model.m = med.fit,"
"0","                   model.y = out.fit,"
"0","                     treat = ""benzonase"","
"0","                     mediator = ""log10(Final_reads)"","
"0","                     sims = 10000)"
"0",""
"0","out.sum <- summary(med.out.benzonase)"
"0",""
"0","final.out.benzonase <- data.frame(`Indirect est.`=out.sum$d.avg, "
"0","                          `Indirect p-value`=out.sum$d.avg.p,"
"0","                          `Direct est.`=out.sum$z.avg, "
"0","                          `Direct p-value`=out.sum$z.avg.p, "
"0","                          `Total est.`=out.sum$tau.coef, "
"0","                          `Total p-value`=out.sum$tau.p,"
"0","                          `Proportion mediation est.`=out.sum$n.avg, "
"0","                          `Proportion mediation p-value`=out.sum$n.avg.p,"
"0","                          check.names = F) %>% "
"0","    mutate_all(~round(., 3))"
"0",""
"0","## host zero"
"0",""
"0",""
"0","med.fit <- lmer(log10(Final_reads) ~ host_zero +  sample_type + (1|subject_id),"
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$host_zero == 1))"
"0",""
"0","out.fit <- lmer(S.obs ~ host_zero * log10(Final_reads) +  sample_type + (1|subject_id), "
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$host_zero == 1))"
"0","set.seed(seed)"
"0","med.out.hostzero <- mediate(model.m = med.fit,"
"0","                   model.y = out.fit,"
"0","                     treat = ""host_zero"","
"0","                     mediator = ""log10(Final_reads)"","
"0","                     sims = 10000)"
"0",""
"0","out.sum <- summary(med.out.hostzero)"
"0",""
"0","final.out.host_zero <- data.frame(`Indirect est.`=out.sum$d.avg, "
"0","                          `Indirect p-value`=out.sum$d.avg.p,"
"0","                          `Direct est.`=out.sum$z.avg, "
"0","                          `Direct p-value`=out.sum$z.avg.p, "
"0","                          `Total est.`=out.sum$tau.coef, "
"0","                          `Total p-value`=out.sum$tau.p,"
"0","                          `Proportion mediation est.`=out.sum$n.avg, "
"0","                          `Proportion mediation p-value`=out.sum$n.avg.p,"
"0","                          check.names = F) %>% "
"0","    mutate_all(~round(., 3))"
"0",""
"0",""
"0","## molysis"
"0",""
"0",""
"0","med.fit <- lmer(log10(Final_reads) ~ molysis +  sample_type + (1|subject_id),"
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$molysis == 1))"
"0",""
"0","out.fit <- lmer(S.obs ~ molysis * log10(Final_reads) +  sample_type + (1|subject_id), "
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$molysis == 1))"
"0","set.seed(seed)"
"0","med.out.molysis <- mediate(model.m = med.fit,"
"0","                   model.y = out.fit,"
"0","                     treat = ""molysis"","
"0","                     mediator = ""log10(Final_reads)"","
"0","                     sims = 10000)"
"0",""
"0","out.sum <- summary(med.out.molysis)"
"0",""
"0","final.out.molysis <- data.frame(`Indirect est.`=out.sum$d.avg, "
"0","                          `Indirect p-value`=out.sum$d.avg.p,"
"0","                          `Direct est.`=out.sum$z.avg, "
"0","                          `Direct p-value`=out.sum$z.avg.p, "
"0","                          `Total est.`=out.sum$tau.coef, "
"0","                          `Total p-value`=out.sum$tau.p,"
"0","                          `Proportion mediation est.`=out.sum$n.avg, "
"0","                          `Proportion mediation p-value`=out.sum$n.avg.p,"
"0","                          check.names = F) %>% "
"0","    mutate_all(~round(., 3))"
"0",""
"0","## qiaamp"
"0",""
"0",""
"0","med.fit <- lmer(log10(Final_reads) ~ qiaamp +  sample_type + (1|subject_id),"
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$qiaamp == 1))"
"0",""
"0","out.fit <- lmer(S.obs ~ qiaamp * log10(Final_reads) + sample_type + (1|subject_id), "
"0","                data = subset(sample_data_respiratory, sample_data_respiratory$control == 1 | sample_data_respiratory$qiaamp == 1))"
"0",""
"0","set.seed(seed)"
"0","med.out_qiaamp <- mediate(model.m = med.fit,"
"0","                   model.y = out.fit,"
"0","                     treat = ""qiaamp"","
"0","                     mediator = ""log10(Final_reads)"","
"0","                     sims = 10000)"
"0",""
"0","out.sum <- summary(med.out_qiaamp)"
"0",""
"0","final.out.qiaamp <- data.frame(`Indirect est.`=out.sum$d.avg, "
"0","                          `Indirect p-value`=out.sum$d.avg.p,"
"0","                          `Direct est.`=out.sum$z.avg, "
"0","                          `Direct p-value`=out.sum$z.avg.p, "
"0","                          `Total est.`=out.sum$tau.coef, "
"0","                          `Total p-value`=out.sum$tau.p,"
"0","                          `Proportion mediation est.`=out.sum$n.avg, "
"0","                          `Proportion mediation p-value`=out.sum$n.avg.p,"
"0","                          check.names = F) %>% "
"0","    mutate_all(~round(., 3))"
"0",""
